import{r as g,j as o,C as N,u as B,a as T,b as q,E as O,S as _,c as K}from"./index-Cn_Rp3rH.js";function y(c){return 1-Math.pow(1-Math.min(1,Math.max(0,c)),3)}function H(c){c=Math.min(1,Math.max(0,c));const p=2.70158;return 1+(p+1)*Math.pow(c-1,3)+p*Math.pow(c-1,2)}function e(c,p,i){return Math.sin(c*p)*i}function S(c,p,i){const h=new K,f=c/2,l=p/2;return h.moveTo(-f+i,-l),h.lineTo(f-i,-l),h.quadraticCurveTo(f,-l,f,-l+i),h.lineTo(f,l-i),h.quadraticCurveTo(f,l,f-i,l),h.lineTo(-f+i,l),h.quadraticCurveTo(-f,l,-f,l-i),h.lineTo(-f,-l+i),h.quadraticCurveTo(-f,-l,-f+i,-l),h}const z=new O(S(.55,1.1,.09),{depth:.04,bevelEnabled:!0,bevelThickness:.008,bevelSize:.008,bevelSegments:2});z.translate(0,0,-.02);const U=new _(S(.5,1.04,.06)),G=new O(S(1.5,1,.06),{depth:.03,bevelEnabled:!0,bevelThickness:.005,bevelSize:.005,bevelSegments:2});G.translate(0,0,-.015);const Y=new _(S(1.4,.9,.04));function b({position:c,rotation:p,scale:i=1,opacity:h=1}){return o.jsxs("group",{position:c,rotation:p,scale:[i,i,i],children:[o.jsx("mesh",{geometry:z,children:o.jsx("meshPhysicalMaterial",{color:"#2a2a2e",roughness:.2,metalness:.6,clearcoat:1,clearcoatRoughness:.15,emissive:"#2a2a2e",emissiveIntensity:.08,transparent:!0,opacity:h})}),o.jsx("mesh",{position:[0,0,.021],geometry:U,children:o.jsx("meshBasicMaterial",{color:"#050508",transparent:!0,opacity:h*.95})})]})}function C({position:c,rotation:p,scale:i=1}){return o.jsxs("group",{position:c,rotation:p,scale:[i,i,i],children:[o.jsx("mesh",{geometry:G,children:o.jsx("meshPhysicalMaterial",{color:"#a0a0a0",roughness:.2,metalness:.5,clearcoat:.8,clearcoatRoughness:.15,emissive:"#a0a0a0",emissiveIntensity:.06})}),o.jsx("mesh",{position:[0,0,.016],geometry:Y,children:o.jsx("meshBasicMaterial",{color:"#0a0a0a"})})]})}const X=new O(S(1.5,1,.06),{depth:.02,bevelEnabled:!0,bevelThickness:.003,bevelSize:.003,bevelSegments:2});X.translate(0,0,-.01);const Z=new O(S(1.5,1,.06),{depth:.015,bevelEnabled:!0,bevelThickness:.003,bevelSize:.003,bevelSegments:2});Z.translate(0,.5,-.0075);const $=new _(S(1.4,.9,.04));$.translate(0,.5,0);function J({position:c,rotation:p,scale:i=1,lidPivotRef:h}){return o.jsxs("group",{position:c,rotation:p,scale:[i,i,i],children:[o.jsx("mesh",{geometry:X,children:o.jsx("meshPhysicalMaterial",{color:"#a0a0a0",roughness:.2,metalness:.5,clearcoat:.8,clearcoatRoughness:.15,emissive:"#a0a0a0",emissiveIntensity:.06})}),o.jsxs("group",{position:[0,.5,0],ref:h,children:[o.jsx("mesh",{geometry:Z,children:o.jsx("meshPhysicalMaterial",{color:"#a0a0a0",roughness:.2,metalness:.5,clearcoat:.8,clearcoatRoughness:.15,emissive:"#a0a0a0",emissiveIntensity:.06})}),o.jsx("mesh",{position:[0,.5,.009],geometry:$,children:o.jsx("meshBasicMaterial",{color:"#0a0a0a"})})]})]})}function Q({bgColor:c}){const{scene:p}=B();return p.background=new q(c),null}function V({paused:c}){const{invalidate:p}=B(),i=g.useRef(!1);return g.useEffect(()=>{p(),i.current=!0},[p]),g.useEffect(()=>{c||p()},[c,p]),T(()=>{c||p()}),null}function W({animation:c,deviceType:p,paused:i}){const h=g.useRef(),f=g.useRef(2.5),l=g.useRef(),m=p==="both",R=p==="macbook",j=p==="ipad",a=c==="laptopOpen"||c==="laptopClose";return T((r,d)=>{i||(f.current+=d);const s=f.current,t=h.current;if(t)switch(t.position.set(0,0,0),t.rotation.set(0,0,0),t.scale.set(1,1,1),c){case"showcase":t.rotation.y=e(s,.25,.35),t.rotation.x=e(s,.18,.05),t.position.y=e(s,.35,.1);break;case"flip":{const n=H(s/2.2);t.rotation.y=(1-n)*Math.PI*1.2,t.position.y=(1-y(s/2.2))*1.2,s>2.6&&(t.rotation.y=e(s-2.6,.22,.3),t.position.y=e(s-2.6,.3,.08));break}case"orbit":t.rotation.y=s*.4,t.position.y=e(s,.5,.06);break;case"scroll":t.rotation.y=e(s,.18,.2),t.position.y=e(s,.2,.15);break;case"single":{t.rotation.y=e(s,.15,.4),t.position.y=e(s,.2,.1);const n=1+e(s,.2,.03);t.scale.set(n,n,n);break}case"slideLeft":{const n=y(Math.min(1,s/1.8));t.position.x=-4*(1-n),t.rotation.y=e(s,.2,.08);break}case"slideUp":{const n=y(Math.min(1,s/1.8));t.position.y=-4*(1-n)+e(s,.3,.06);break}case"slideRightRotate":{const n=y(Math.min(1,s/2));t.position.x=4*(1-n),t.rotation.y=Math.PI*.5*(1-n)+e(s,.2,.08);break}case"zoomBottomLeft":{const n=y(Math.min(1,s/2.2)),u=1+.5*n;t.scale.set(u,u,u),t.rotation.x=-.25*n+e(s,.15,.02),t.rotation.y=.35*n+e(s,.12,.03),t.rotation.z=-.12*n,t.position.y=e(s,.22,.03),t.position.z=.3*n;break}case"laptopOpen":{const n=y(Math.min(1,s/2.5));l.current&&(l.current.rotation.x=-(n*(Math.PI/2))),t.rotation.x=.35-.15*n+e(s,.1,.02),t.rotation.y=e(s,.15,.12),t.position.y=-.15+.15*n+e(s,.2,.04);break}case"laptopClose":{const n=y(Math.min(1,s/2.5));l.current&&(l.current.rotation.x=-(Math.PI/2*(1-n))),t.rotation.x=.2+.15*n+e(s,.1,.02),t.rotation.y=e(s,.15,.12),t.position.y=e(s,.2,.04);break}case"sideBySide":{t.rotation.y=e(s,.2,.2),t.position.y=e(s,.3,.06);break}default:t.rotation.y=e(s,.3,.3),t.position.y=e(s,.4,.08)}}),o.jsx("group",{ref:h,children:a?o.jsx(J,{position:[0,0,0],rotation:[-Math.PI/2,0,0],scale:.75,lidPivotRef:l}):R?o.jsx(C,{position:[0,0,0],rotation:[0,0,0],scale:.7}):j?o.jsx(b,{position:[0,0,0],rotation:[0,0,0],scale:1.3}):m?o.jsxs(o.Fragment,{children:[o.jsx(b,{position:[-.55,0,0],rotation:[0,.15,0]}),o.jsx(b,{position:[.55,0,0],rotation:[0,-.15,0]})]}):o.jsx(b,{position:[0,0,0]})})}function tt({animation:c,paused:p}){const i=g.useRef(),h=g.useRef({}),f=g.useRef(2.5),l=R=>j=>{j&&(h.current[R]=j)};T((R,j)=>{p||(f.current+=j);const a=f.current,r=i.current;if(!r)return;const d=h.current;switch(r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),c){case"sideScroll10":{const t=Math.min(1,a/8),n=t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2;r.position.x=-3.15*n+3.15*(1-n);break}case"angled3ZoomOut":{const s=1.6-.6*y(Math.min(1,a/2.5));r.scale.set(s,s,s),r.rotation.y=e(a,.15,.08),r.position.y=e(a,.25,.05);break}case"circle4Rotate":{const n=a/1.4,u=Math.floor(n),x=n-u,k=x<.5/1.4?y(x/(.5/1.4)):1,w=Math.min(u+k,4);r.rotation.y=w/4*Math.PI*2,r.rotation.x=.08;for(let P=0;P<4;P++){const v=d[`p${P}`];if(v){const E=P/4*Math.PI*2;v.position.set(Math.sin(E)*.5,0,Math.cos(E)*.5),v.rotation.y=E}}break}case"angledZoom4":{const s=y(Math.min(1,a/2));r.rotation.x=.35*s+e(a,.12,.02),r.rotation.y=-.15*s+e(a,.1,.06),r.position.y=-.2*s+e(a,.2,.04);const t=3;for(let n=0;n<4;n++){const u=d[`p${n}`];if(!u)continue;const x=n/3,k=-t/2+x*t,w=-.4+.4*Math.sin(x*Math.PI),P=.1+.1*Math.sin(x*Math.PI),v=.15-x*.3;u.position.set(k,P+e(a+n*.5,.3,.04),w),u.rotation.set(0,v,.04-x*.08)}break}case"carousel6":{r.rotation.y=a*.2,r.position.y=e(a,.25,.05);const s=1.8;for(let t=0;t<6;t++){const n=d[`p${t}`];if(!n)continue;const u=t/6*Math.PI*2,x=(t%2===0?.2:-.2)+e(a+t*.8,.35,.06);n.position.set(Math.sin(u)*s,x,Math.cos(u)*s),n.rotation.y=u}break}case"floatingPhoneLaptop":case"phoneInFrontLaptop":{const t=y(Math.min(1,a/4)),n=-Math.PI*.55;r.rotation.y=n+(0-n)*t+e(a,.05,.012),r.rotation.x=.2-.06*t+e(a,.04,.008),r.position.y=.1+e(a,.1,.018);const u=1.4+(1-1.4)*t;r.scale.set(u,u,u),d.laptop&&(d.laptop.position.set(-.1,-.45,-.2),d.laptop.rotation.set(.08+e(a,.04,.008),-.12+e(a,.03,.008),e(a+.3,.04,.006))),d.phone&&(d.phone.position.set(.95,-.1+e(a+.5,.08,.015),.8),d.phone.rotation.set(-.06+e(a,.05,.008),-.12+e(a,.04,.01),.03+e(a+1,.05,.006)));break}case"phoneOnKeyboard":{const t=y(Math.min(1,a/4));r.rotation.x=.6+(.16-.6)*t+e(a,.03,.005),r.rotation.y=e(a,.04,.008),r.position.y=-.5+(.1- -.5)*t+e(a,.06,.012);const n=1.8+(1-1.8)*t;r.scale.set(n,n,n),d.laptop&&(d.laptop.position.set(0,-.45,0),d.laptop.rotation.set(.06+e(a,.02,.005),e(a,.02,.006),0)),d.phone&&(d.phone.position.set(.3,-.15,.5),d.phone.rotation.set(-1.1,.12+e(a,.02,.004),.08));break}case"offsetCircleRotate":{r.rotation.y=a*.18,r.rotation.x=e(a,.1,.03),r.position.y=e(a,.2,.04);const s=1.5;for(let t=0;t<6;t++){const n=d[`p${t}`];if(!n)continue;const u=t/6*Math.PI*2,x=t%3===0?.25:t%3===1?-.15:.1;n.position.set(Math.sin(u)*s,x+e(a+t*.6,.3,.04),Math.cos(u)*s),n.rotation.y=u,n.rotation.z=e(a+t,.2,.02)}break}case"flatScatter7":{if(a<2){const M=y(a/2);r.rotation.x=.4+(1.25-.4)*M,r.rotation.y=.2*(1-M),r.position.y=.45-.1*M}else if(a<3.5)r.rotation.x=1.25+e(a,.06,.015),r.rotation.y=e(a,.04,.02),r.position.y=.35+e(a,.08,.02);else{const M=a-3.5;r.rotation.x=1.25+e(a,.06,.015),r.rotation.y=M*.12+e(a,.04,.02),r.position.y=.35+e(a,.08,.02)}const x=.74,k=4,w=2,P=-3*x/2,v=-1*x/2;let E=0;for(let M=0;M<w;M++){const D=Math.min(k,7-E),F=Math.floor((k-D)/2);for(let I=0;I<D;I++){const A=F+I,L=d[`p${E}`];L&&(L.position.set(P+A*x,0,v+M*x),L.rotation.set(-Math.PI/2,0,(M+A)%2===1?Math.PI/2:0)),E++}}break}}});const m=(R,j=.85)=>c==="sideScroll10"?Array.from({length:R},(a,r)=>o.jsx("group",{ref:l(`p${r}`),position:[(r-(R-1)/2)*.7,0,0],children:o.jsx(b,{scale:j})},r)):c==="angled3ZoomOut"?[[-1.1,0,-.2],[0,0,.1],[1.1,0,-.2]].map((a,r)=>o.jsx("group",{ref:l(`p${r}`),position:a,rotation:[0,r===0?-.3:r===2?.3:0,0],children:o.jsx(b,{scale:j})},r)):Array.from({length:R},(a,r)=>o.jsx("group",{ref:l(`p${r}`),children:o.jsx(b,{scale:j})},r));switch(c){case"sideScroll10":return o.jsx("group",{ref:i,children:m(10,.75)});case"angled3ZoomOut":return o.jsx("group",{ref:i,children:m(3,.9)});case"circle4Rotate":return o.jsx("group",{ref:i,children:m(4,.75)});case"angledZoom4":return o.jsx("group",{ref:i,children:m(4,.85)});case"carousel6":return o.jsx("group",{ref:i,children:m(6,.7)});case"offsetCircleRotate":return o.jsx("group",{ref:i,children:m(6,.72)});case"flatScatter7":return o.jsx("group",{ref:i,children:m(7,.8)});case"floatingPhoneLaptop":case"phoneInFrontLaptop":return o.jsxs("group",{ref:i,children:[o.jsx("group",{ref:l("laptop"),children:o.jsx(C,{scale:.6})}),o.jsx("group",{ref:l("phone"),children:o.jsx(b,{scale:.65})})]});case"phoneOnKeyboard":return o.jsxs("group",{ref:i,children:[o.jsx("group",{ref:l("laptop"),children:o.jsx(C,{scale:.65})}),o.jsx("group",{ref:l("phone"),children:o.jsx(b,{scale:.5})})]});default:return null}}const et=new Set(["sideScroll10","angled3ZoomOut","circle4Rotate","angledZoom4","carousel6","floatingPhoneLaptop","phoneInFrontLaptop","phoneOnKeyboard","offsetCircleRotate","flatScatter7"]);function st({animation:c,bgColor:p,deviceType:i,paused:h=!1}){const f=g.useRef(null),l=g.useCallback(({gl:m})=>{f.current=m},[]);return g.useEffect(()=>()=>{const m=f.current;m&&(m.dispose(),m.forceContextLoss?.())},[]),o.jsxs(N,{camera:{position:[0,0,2.8],fov:45},gl:{antialias:!0,alpha:!1,powerPreference:"low-power"},dpr:1,frameloop:"demand",style:{width:"100%",height:"100%",borderRadius:"inherit"},onCreated:l,children:[o.jsx(V,{paused:h}),o.jsx(Q,{bgColor:p}),o.jsx("ambientLight",{intensity:.5}),o.jsx("directionalLight",{position:[3,4,3],intensity:1.2}),o.jsx("directionalLight",{position:[-2,2,-1],intensity:.4}),et.has(c)?o.jsx(tt,{animation:c,paused:h}):o.jsx(W,{animation:c,deviceType:i,paused:h})]})}export{st as default};
